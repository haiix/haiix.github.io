const x=(function(){const e=typeof document<"u"&&document.createElement("link").relList;return e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"})(),k=function(t,e){return new URL(t,e).href},y={},b=function(e,n,r){let c=Promise.resolve();if(n&&n.length>0){let R=function(a){return Promise.all(a.map(f=>Promise.resolve(f).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};const o=document.getElementsByTagName("link"),s=document.querySelector("meta[property=csp-nonce]"),i=s?.nonce||s?.getAttribute("nonce");c=R(n.map(a=>{if(a=k(a,r),a in y)return;y[a]=!0;const f=a.endsWith(".css"),m=f?'[rel="stylesheet"]':"";if(r)for(let p=o.length-1;p>=0;p--){const h=o[p];if(h.href===a&&(!f||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${m}`))return;const d=document.createElement("link");if(d.rel=f?"stylesheet":x,f||(d.as="script"),d.crossOrigin="",d.href=a,i&&d.setAttribute("nonce",i),document.head.appendChild(d),f)return new Promise((p,h)=>{d.addEventListener("load",p),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${a}`)))})}))}function l(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return c.then(o=>{for(const s of o||[])s.status==="rejected"&&l(s.reason);return e().catch(l)})};function A(t){return document.createElement(t)}function L(t,e){let n;return t.append(...e.map(r=>(r instanceof Element&&(n=r),Array.isArray(r)?L(n,r):r))),t}function P(t){return e=>(...n)=>{try{const r=e(...n);typeof r?.catch=="function"&&r.catch(t)}catch(r){t(r)}}}function g(t,e="div"){const n=typeof e=="string"?A(e):e;return t&&n.setAttribute("class",t),n}function E(t,e,n="div"){const r=g(e,n);return r.textContent=t,r}function _(t){const e=g();return e.textContent=t,e.innerHTML}function N(t,e,n){return Math.min(Math.max(e,t),n)}function T(t){return document.createTreeWalker(t,NodeFilter.SHOW_TEXT,{acceptNode(e){return e.nodeValue&&e.nodeValue.length>0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}})}function H(t){const e=T(t);let n=0;for(;e.nextNode();)n+=e.currentNode.nodeValue.length;return n}function M(t){const e=T(t);let n=null;for(;e.nextNode();)n=e.currentNode;return n}function S(t,e){const n=T(t);let r=0;for(;n.nextNode();){const l=n.currentNode,o=l.nodeValue.length;if(e<=r+o)return{node:l,offset:e-r};r+=o}const c=M(t);return c?{node:c,offset:c.nodeValue.length}:null}function O(t){const e=window.getSelection();if(!e||e.rangeCount===0)return null;const n=e.getRangeAt(0);return!t.contains(n.startContainer)||!t.contains(n.endContainer)?null:n}function $(t){const e=O(t);if(!e)return null;const n=T(t);let r=-1,c=-1,l=0;for(;n.nextNode();){const o=n.currentNode,s=o.nodeValue.length;o===e.startContainer&&(r=l+e.startOffset),o===e.endContainer&&(c=l+e.endOffset),l+=s}if(r<0||c<0){const o=e.cloneRange(),s=document.createRange();s.selectNodeContents(t),s.setEnd(o.startContainer,o.startOffset),r=s.toString().length;const i=document.createRange();i.selectNodeContents(t),i.setEnd(o.endContainer,o.endOffset),c=i.toString().length}return r>c&&([r,c]=[c,r]),{start:r,end:c,isCollapsed:r===c}}function V(t,e){let{start:n,end:r}=e;const c=H(t);n=N(n,0,c),r=N(r,0,c);const l=S(t,n),o=S(t,r);if(!l||!o)return!1;const s=document.createRange();s.setStart(l.node,l.offset),s.setEnd(o.node,o.offset);const i=window.getSelection();return i?(i.removeAllRanges(),i.addRange(s),!0):!1}const u=E(`{
  var a = 1;
  let b: number = 2;
}
console.log(a, b);`,"content-editable input-area");u.contentEditable="plaintext-only";u.spellcheck=!1;const v=g("content-editable"),C=g("content-editable");L(document.body,[g("app"),[E("入力:"),u,E("グローバル変数リスト:"),v,E("未定義変数リスト:"),C]]);u.focus();const w=P(t=>{console.error(t);const e=_(t instanceof Error?`${t.name}: ${t.message}`:String(t));v.innerHTML=`<span class="error">${e}</span>`,C.textContent=null});w(async()=>{const t=await b(()=>import("./parser-Da0F-1uf.js"),[],import.meta.url),e=()=>{const r=$(u);[v.innerHTML,C.innerHTML,u.innerHTML]=t.parse(u.innerText),r&&V(u,r)};let n=null;u.oninput=w(()=>{n!=null&&clearTimeout(n),n=setTimeout(w(()=>{n=null,e()}),500)}),e()})();export{N as c,_ as e};
